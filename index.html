<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>KssS Restaurant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body { background:#111; color:#fff; font-family: Arial, sans-serif; margin:0 }
    .header { text-align:center; padding:15px; background:#000 }
    .menu-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(160px,1fr)); gap:10px; padding:10px }
    .card { background:#1c1c1c; border-radius:8px; padding:10px; text-align:center }
    .card button { margin-top:8px; width:100%; padding:6px }
    #placeOrderBtn { width:100%; background:green; color:#fff; padding:15px; border:none; font-size:18px }
  </style>
</head>

<body>

<header class="header">
  <h1>KssS Restaurant</h1>
  <p>Kukra Rd, Bhartiya Colony, Muzaffarnagar</p>
  <p>ðŸ“ž 9045989889</p>
</header>

<div id="tableInfo"></div>
<div class="menu-grid" id="menu"></div>
<button id="placeOrderBtn">Place Order</button>

<!-- ðŸ”¥ FIREBASE + APP LOGIC -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } 
  from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  /* ðŸ” Firebase config */
  const firebaseConfig = {
    apiKey: "AIzaSyDT7ZsaAd3R4UWf0RvdQ27UblO2gxr14z0",
    authDomain: "ksss-restaurant-7d0cb.firebaseapp.com",
    projectId: "ksss-restaurant-7d0cb",
    storageBucket: "ksss-restaurant-7d0cb.appspot.com",
    messagingSenderId: "598407397418",
    appId: "1:598407397418:web:92a95f0b4fd95c48518353"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  /* ðŸ½ MENU DATA */
  const menuData = [
    {name:"Plain Dosa", price:80},
    {name:"Masala Dosa", price:100},
    {name:"Paneer Dosa", price:120},
    {name:"Onion Dosa", price:90},
    {name:"Idli Sambhar", price:60},
    {name:"Cheese Pizza", price:120},
    {name:"Veg Pizza", price:150},
    {name:"Paneer Pizza", price:180},
    {name:"Tea", price:20},
    {name:"Cold Coffee", price:60}
  ];

  const menuDiv = document.getElementById("menu");
  const order = [];

  /* ðŸ–¼ Render Menu */
  menuData.forEach(item=>{
    const d = document.createElement("div");
    d.className="card";
    d.innerHTML = `
      <h4>${item.name}</h4>
      <p>â‚¹${item.price}</p>
      <button>Add</button>
    `;
    d.querySelector("button").onclick = ()=>{
      order.push(item);
      alert(item.name+" added");
    };
    menuDiv.appendChild(d);
  });

  /* ðŸ§¾ Table number */
  const params = new URLSearchParams(window.location.search);
  const tableNo = params.get("table") || "N/A";
  document.getElementById("tableInfo").innerHTML = `<h3 style="padding:10px">Table No: ${tableNo}</h3>`;

  /* ðŸ“¤ Place order */
  document.getElementById("placeOrderBtn").onclick = async ()=>{
    if(order.length === 0){
      alert("No items selected");
      return;
    }

    await addDoc(collection(db,"orders"),{
      table: tableNo,
      items: order,
      status: "New",
      created: serverTimestamp()
    });

    alert("Order placed successfully");
    location.reload();
  };
</script>

</body>
</html>
