<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>KssS Restaurant QR POS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#111;color:#fff}
header{background:#000;padding:12px;text-align:center}
h2{margin:0;color:#ffd700}
.tableBox{text-align:center;margin:6px 0}

.category{background:#d32f2f;padding:8px;margin-top:15px;text-align:center;font-weight:bold}
.item{border-bottom:1px solid #333;padding:10px}

.foodImg{
width:100%;
height:140px;
object-fit:cover;
border-radius:6px;
margin-bottom:6px
}

.top{display:flex;justify-content:space-between;align-items:center}

.plate button{
padding:4px 8px;
margin-right:5px;
border:none;
border-radius:4px;
background:#444;
color:#fff;
cursor:pointer
}
.plate button.active{background:#2e7d32}

.qty{
display:flex;
justify-content:space-between;
align-items:center;
margin-top:6px
}
.qty button{
padding:4px 8px;
background:#ff9800;
border:none;
border-radius:4px
}

.total{font-size:22px;text-align:center;margin:15px;color:#0f0}

.place,.adminBtn{
width:90%;
margin:8px auto;
display:block;
font-size:16px;
padding:10px;
border:none;
border-radius:6px;
color:#fff
}
.place{background:#d32f2f;font-size:18px}
.adminBtn{background:#555}

.container{max-width:520px;margin:auto}
footer{text-align:center;font-size:14px;padding:8px;background:#000}
</style>
</head>

<body>

<header>
<h2>KssS Restaurant – 100% Veg</h2>
</header>

<div class="tableBox">
Table No: <b id="tableNo">N/A</b>
</div>

<div class="container">
<button class="adminBtn" onclick="toggleAdmin()">ADMIN PANEL</button>
<div id="menu"></div>
<div class="total">Total ₹ <span id="total">0</span></div>
<button class="place" onclick="placeOrder()">Place Order</button>
</div>

<footer>QR POS System</footer>

<script>
/* ===== TABLE ===== */
var params = new URLSearchParams(window.location.search);
var tableNo = params.get("table") || "N/A";
document.getElementById("tableNo").innerText = tableNo;

/* ===== IMAGE ===== */
function foodImg(name){
  return "https://source.unsplash.com/600x400/?" +
         encodeURIComponent(name + " food");
}

/* ===== FULL MENU (POSTER) ===== */
var menuData = [
{category:"Chinese",items:[
{name:"Veg Chowmein",half:40,full:70,enable:true},
{name:"Paneer Chowmein",half:60,full:120,enable:true},
{name:"Hakka Noodles",half:60,full:120,enable:true},
{name:"Singapore Noodles",half:60,full:120,enable:true},
{name:"Veg Steam Momos",half:40,full:80,enable:true},
{name:"Paneer Steam Momos",half:50,full:100,enable:true},
{name:"Veg Fried Momos",half:40,full:80,enable:true},
{name:"Paneer Fried Momos",half:50,full:100,enable:true},
{name:"Soyabean Momos",half:30,full:60,enable:true},
{name:"Veg Kurkure Momos",half:60,full:90,enable:true},
{name:"Paneer Kurkure Momos",half:70,full:120,enable:true},
{name:"Soyabean Kurkure Momos",half:50,full:80,enable:true},
{name:"Butter Momos",half:60,full:90,enable:true},
{name:"Paneer Butter Momos",half:70,full:120,enable:true},
{name:"Soyabean Butter Momos",half:50,full:90,enable:true},
{name:"Peri Peri Momos",half:90,full:90,enable:true},
{name:"Peri Peri Paneer Momos",half:70,full:120,enable:true},
{name:"Peri Peri Soyabean Momos",half:50,full:80,enable:true},
{name:"Veg Cheese Momos",half:60,full:90,enable:true},
{name:"Paneer Cheese Momos",half:70,full:120,enable:true},
{name:"Soyabean Cheese Momos",half:50,full:80,enable:true}
]},
{category:"Snacks",items:[
{name:"French Fries",half:30,full:50,enable:true},
{name:"Cheese French Fries",half:50,full:70,enable:true},
{name:"Peri Peri French Fries",half:50,full:70,enable:true},
{name:"Chilli Potato",half:50,full:100,enable:true},
{name:"Honey Chilli Potato",half:60,full:120,enable:true},
{name:"Spring Roll",half:30,full:60,enable:true},
{name:"Spring Roll Twin",half:50,full:80,enable:true},
{name:"Veg Burger",price:30,enable:true},
{name:"Special Burger (Paneer + Amul Butter)",price:50,enable:true}
]},
{category:"Rice & Pasta",items:[
{name:"Veg Fried Rice",half:60,full:90,enable:true},
{name:"Paneer Fried Rice",half:80,full:120,enable:true},
{name:"White Sauce Pasta",half:50,full:100,enable:true},
{name:"Red Sauce Pasta",half:50,full:90,enable:true},
{name:"Mix Sauce Pasta",half:60,full:120,enable:true}
]},
{category:"Pizza",items:[
{name:"Cheese Pizza",price:120,enable:true},
{name:"Onion Pizza",price:150,enable:true},
{name:"Tomato Pizza",price:150,enable:true},
{name:"Mix Veg Pizza",price:150,enable:true},
{name:"Paneer Pizza",price:180,enable:true},
{name:"Sweet Corn Pizza",price:160,enable:true},
{name:"Mushroom Pizza",price:160,enable:true},
{name:"Chef Special Pizza",price:200,enable:true}
]}
];

/* ===== STATE ===== */
var cart={}, total=0, adminMode=false;
var menu=document.getElementById("menu");
var totalBox=document.getElementById("total");

/* ===== LOAD MENU ===== */
function loadMenu(){
menu.innerHTML="";
cart={};

menuData.forEach(function(c){
menu.innerHTML += "<div class='category'>"+c.category+"</div>";
c.items.forEach(function(i){
if(!i.enable && !adminMode) return;

var id=i.name.replace(/\s/g,"_");
cart[id]={name:i.name,qty:0,price:0,plate:""};

var priceHTML="",plateHTML="";
if(i.half){
priceHTML="₹"+i.half+" / ₹"+i.full;
plateHTML =
"<div class='plate'>"+
"<button onclick=\"setPlate('"+id+"','Half',"+i.half+",this)\">Half</button>"+
"<button onclick=\"setPlate('"+id+"','Full',"+i.full+",this)\">Full</button>"+
"</div>";
}else{
priceHTML="₹"+i.price;
cart[id].price=i.price;
cart[id].plate="Full";
}

menu.innerHTML +=
"<div class='item'>"+
"<img class='foodImg' src='"+foodImg(i.name)+"'>"+
"<div class='top'><b>"+i.name+"</b><span>"+priceHTML+"</span></div>"+
plateHTML+
"<div class='qty'>"+
"<button onclick=\"qty('"+id+"',-1)\">−</button>"+
"<span id='q_"+id+"'>0</span>"+
"<button onclick=\"qty('"+id+"',1)\">+</button>"+
"</div>"+
"</div>";
});
});
}

/* ===== CART ===== */
function setPlate(id,plate,price,btn){
cart[id].price=price;
cart[id].plate=plate;
Array.from(btn.parentNode.children).forEach(function(b){
b.classList.remove("active");
});
btn.classList.add("active");
calc();
}
function qty(id,d){
cart[id].qty=Math.max(0,cart[id].qty+d);
document.getElementById("q_"+id).innerText=cart[id].qty;
calc();
}
function calc(){
total=0;
Object.values(cart).forEach(function(i){
total+=i.price*i.qty;
});
totalBox.innerText=total;
}

/* ===== ADMIN ===== */
function toggleAdmin(){
adminMode=!adminMode;
loadMenu();
}

/* ===== BILL + KITCHEN ===== */
function placeOrder(){
if(total===0){alert("No items selected");return;}

var bill="", kitchen="";
Object.values(cart).forEach(function(i){
if(i.qty>0){
bill+=i.name+" ("+i.plate+") x"+i.qty+" = ₹"+(i.qty*i.price)+"<br>";
kitchen+=i.name+" ("+i.plate+") x"+i.qty+"<br>";
}
});

/* BILL */
var b=window.open("");
b.document.write(
"<!DOCTYPE html><html><body onload='window.print()' "+
"style='font-family:monospace;width:260px'>"+
"<center><b>KssS Restaurant</b></center><hr>"+
"Table: "+tableNo+"<br>"+bill+
"<hr><b>Total: ₹"+total+"</b>"+
"</body></html>"
);
b.document.close();

/* KITCHEN */
var k=window.open("");
k.document.write(
"<!DOCTYPE html><html><body onload='window.print()' "+
"style='font-family:monospace;width:260px'>"+
"<center><b>KITCHEN SLIP</b></center><hr>"+
"Table: "+tableNo+"<br>"+kitchen+
"</body></html>"
);
k.document.close();

loadMenu();
totalBox.innerText=0;
}

loadMenu();
</script>

</body>
</html>
